<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8"/>
	<title>ReverseGeocache Protocol</title>
</head>
<body>

<style>
    body {
        text-align:justify;
        width: 1000px;
        background-color:#eee;
        margin-left: auto;
        margin-right: auto;
        font-family:Verdana;
        counter-reset: h1counter;    }

    table {
       border: 3px solid darkred;
       border-collapse: collapse;
    }

    th, td {
       border: 1px solid green;
       font-family: Courier New, monospace;
    }

    td{ padding: 2px; }
    h1, h2, h3, h4, h5 { font-family: Arial; }
    h1 { font-size:150%; }
    h2 { font-size:135%; }
    h3 { font-size:120%; }
    h4 { font-size:110%; }
    h5, li { font-size:100%; }
    caption{ font-family:Verdana; }

    code, pre, .codelike {
        font-family: Courier New, monospace;
        font-size: 100%;
        color: darkblue;
    }
    h1:before {
      content: counter(h1counter) "\00a0 ";
      counter-increment: h1counter;
      counter-reset: h2counter;
    }
    h1 {
      counter-reset: h2counter;
    }
    h2:before {
      content: counter(h1counter) "." counter(h2counter) "\00a0 ";
      counter-increment: h2counter;
      counter-reset: h3counter;
    }
    h3:before {
      content: counter(h1counter) "." counter(h2counter) "." counter(h3counter) "\00a0 ";
      counter-increment: h3counter;
    }</style>

<h1 id="reversegeocacheprotocol">ReverseGeocache Protocol</h1>

<p>Data <em>on the wire</em> are sent in BIG endian format. Any field larger than one byte is sent with the most signficant byte first, and the least significant byte last</p>

<p>ReverseGeocache Protocol version is 1.0.0.a.</p>

<p>ReverseGeocache Protocol API is 1.</p>

<hr />

<h1 id="aboutthisicd">About this ICD</h1>

<p>This is the interface control document for data <em>on the wire</em>, not data in memory. This document was automatically generated by the <a href="https://github.com/billvaglienti/ProtoGen">ProtoGen software</a>, version 1.4.1.a. ProtoGen also generates C source code for doing most of the work of encoding data from memory to the wire, and vice versa. Documentation for software developers (i.e. data <em>in memory</em>) is separately produced as a doxygen product, parsing comments embedded in the automatically generated code.</p>

<h1 id="encodings">Encodings</h1>

<p>Data can be encoded as unsigned integers, signed integers (two&#8217;s complement), bitfields, and floating point.</p>

<table>
<colgroup>
<col style="text-align:center;"/>
<col/>
<col/>
</colgroup>

<thead>
<tr>
	<th style="text-align:center;"><a name="Enc"></a>Encoding</th>
	<th>Interpretation</th>
	<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
	<td style="text-align:center;">UX</td>
	<td>Unsigned integer X bits long</td>
	<td>X must be: 8, 16, 24, 32, 40, 48, 56, or 64</td>
</tr>
<tr>
	<td style="text-align:center;">IX</td>
	<td>Signed integer X bits long</td>
	<td>X must be: 8, 16, 24, 32, 40, 48, 56, or 64</td>
</tr>
<tr>
	<td style="text-align:center;">BX</td>
	<td>Unsigned integer bitfield X bits long</td>
	<td>X must be greater than 0 and less than 32</td>
</tr>
<tr>
	<td style="text-align:center;">F16</td>
	<td>16 bit floating point</td>
	<td>1 sign bit : 6 exponent bits : 9 significant bits with implied leading 1</td>
</tr>
<tr>
	<td style="text-align:center;">F24</td>
	<td>24 bit floating point</td>
	<td>1 sign bit : 8 exponent bits : 15 significant bits with implied leading 1</td>
</tr>
<tr>
	<td style="text-align:center;">F32</td>
	<td>32 bit floating point (IEEE&#8211;754)</td>
	<td>1 sign bit : 8 exponent bits : 23 significant bits with implied leading 1</td>
</tr>
<tr>
	<td style="text-align:center;">F64</td>
	<td>64 bit floating point (IEEE&#8211;754)</td>
	<td>1 sign bit : 11 exponent bits : 52 significant bits with implied leading 1</td>
</tr>
</tbody>
</table>

<h1 id="sizeoffields">Size of fields</h1>

<p>The encoding tables give the bytes for each field as X&#8230;Y; where X is the first byte (counting from 0) and Y is the last byte. For example a 4 byte field at the beginning of a packet will give 0&#8230;3. If the field is 1 byte long then only the starting byte is given. Bitfields are more complex, they are displayed as Byte:Bit. A 3-bit bitfield at the beginning of a packet will give 0:7&#8230;0:5, indicating that the bitfield uses bits 7, 6, and 5 of byte 0. Note that the most signficant bit of a byte is 7, and the least signficant bit is 0. If the bitfield is 1 bit long then only the starting bit is given.</p>

<p>The byte count in the encoding tables are based on the maximum length of the field(s). If a field is variable length then the actual byte location of the data may be different depending on the value of the variable field. If the field is a variable length character string this will be indicated in the encoding column of the table. If the field is a variable length array this will be indicated in the repeat column of the encoding table. If the field depends on the non-zero value of another field then will be indicated in the description column of the table.</p>

<hr />

<h1 id="enumerations">Enumerations</h1>

<p>ReverseGeocache protocol defines these global enumerations.</p>

<h2 id="packet">Packet</h2>

<table>
<caption id="anamepacketapacket:usbpackettypes"><a name="Packet"></a>Packet: USB Packet types</caption>
<colgroup>
<col/>
<col style="text-align:center;"/>
<col/>
</colgroup>

<thead>
<tr>
	<th>Name</th>
	<th style="text-align:center;">Value</th>
	<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td><a href="#RESET_INTO_BOOTLOADER"><code>RESET_INTO_BOOTLOADER</code></a></td>
	<td style="text-align:center;">10</td>
	<td></td>
</tr>
<tr>
	<td><a href="#ENABLE_DEBUG_MODE"><code>ENABLE_DEBUG_MODE</code></a></td>
	<td style="text-align:center;">11</td>
	<td></td>
</tr>
<tr>
	<td><a href="#SYSTEM_INFO"><code>SYSTEM_INFO</code></a></td>
	<td style="text-align:center;">160</td>
	<td></td>
</tr>
<tr>
	<td><a href="#CLUE_INFO"><code>CLUE_INFO</code></a></td>
	<td style="text-align:center;">176</td>
	<td></td>
</tr>
<tr>
	<td><a href="#CLUE_LINE"><code>CLUE_LINE</code></a></td>
	<td style="text-align:center;">192</td>
	<td></td>
</tr>
<tr>
	<td><a href="#UNLOCK"><code>UNLOCK</code></a></td>
	<td style="text-align:center;">208</td>
	<td></td>
</tr>
<tr>
	<td><a href="#LOCK"><code>LOCK</code></a></td>
	<td style="text-align:center;">209</td>
	<td></td>
</tr>
<tr>
	<td><a href="#NEXT_CLUE"><code>NEXT_CLUE</code></a></td>
	<td style="text-align:center;">224</td>
	<td></td>
</tr>
<tr>
	<td><a href="#PREV_CLUE"><code>PREV_CLUE</code></a></td>
	<td style="text-align:center;">225</td>
	<td></td>
</tr>
<tr>
	<td><a href="#FIRST_CLUE"><code>FIRST_CLUE</code></a></td>
	<td style="text-align:center;">226</td>
	<td></td>
</tr>
<tr>
	<td><a href="#LAST_CLUE"><code>LAST_CLUE</code></a></td>
	<td style="text-align:center;">227</td>
	<td></td>
</tr>
<tr>
	<td><a href="#SET_CLUE_COUNT"><code>SET_CLUE_COUNT</code></a></td>
	<td style="text-align:center;">240</td>
	<td></td>
</tr>
<tr>
	<td><code>INVALIDATE_CLUES</code></td>
	<td style="text-align:center;">241</td>
	<td></td>
</tr>
<tr>
	<td><a href="#VALIDATE_CLUES"><code>VALIDATE_CLUES</code></a></td>
	<td style="text-align:center;">242</td>
	<td></td>
</tr>
</tbody>
</table>

<h2 id="cluetypes">ClueTypes</h2>

<table>
<caption id="anamecluetypesacluetypes"><a name="ClueTypes"></a>ClueTypes</caption>
<colgroup>
<col/>
<col style="text-align:center;"/>
<col/>
</colgroup>

<thead>
<tr>
	<th>Name</th>
	<th style="text-align:center;">Value</th>
	<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td><code>CLUE_NO_HINT</code></td>
	<td style="text-align:center;">0</td>
	<td></td>
</tr>
<tr>
	<td><code>CLUE_SHOW_DISTANCE</code></td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td><code>CLUE_SHOW_LOCATION</code></td>
	<td style="text-align:center;">2</td>
	<td></td>
</tr>
<tr>
	<td><code>CLUE_WARMER_COOLER</code></td>
	<td style="text-align:center;">3</td>
	<td></td>
</tr>
<tr>
	<td><code>CLUE_SHOW_HEADING</code></td>
	<td style="text-align:center;">4</td>
	<td></td>
</tr>
<tr>
	<td><code>CLUE_SHOW_CARDINAL</code></td>
	<td style="text-align:center;">5</td>
	<td></td>
</tr>
<tr>
	<td><code>NUM_CLUE_TYPES</code></td>
	<td style="text-align:center;">6</td>
	<td></td>
</tr>
</tbody>
</table>

<hr />

<h1 id="packets">Packets</h1>

<p>This section describes the data payloads of the packets; and how those data are represented in the bytes of the packets.</p>

<h2 id="anameunlockaunlock"><a name="UNLOCK"></a>Unlock</h2>

<ul>
<li>packet identifier: <code>UNLOCK</code> : 208</li>
<li>data length:</li>
</ul>

<h2 id="anamelockalock"><a name="LOCK"></a>Lock</h2>

<ul>
<li>packet identifier: <code>LOCK</code> : 209</li>
<li>data length:</li>
</ul>

<h2 id="anamenext_clueanextclue"><a name="NEXT_CLUE"></a>NextClue</h2>

<ul>
<li>packet identifier: <code>NEXT_CLUE</code> : 224</li>
<li>data length:</li>
</ul>

<h2 id="anameprev_clueaprevclue"><a name="PREV_CLUE"></a>PrevClue</h2>

<ul>
<li>packet identifier: <code>PREV_CLUE</code> : 225</li>
<li>data length:</li>
</ul>

<h2 id="anamefirst_clueafirstclue"><a name="FIRST_CLUE"></a>FirstClue</h2>

<ul>
<li>packet identifier: <code>FIRST_CLUE</code> : 226</li>
<li>data length:</li>
</ul>

<h2 id="anamelast_cluealast_clue"><a name="LAST_CLUE"></a>LAST_CLUE</h2>

<ul>
<li>packet identifier: <code>LAST_CLUE</code> : 227</li>
<li>data length:</li>
</ul>

<h2 id="anamereset_into_bootloaderabootload"><a name="RESET_INTO_BOOTLOADER"></a>Bootload</h2>

<ul>
<li>packet identifier: <code>RESET_INTO_BOOTLOADER</code> : 10</li>
<li>data length:</li>
</ul>

<h2 id="anameenable_debug_modeaenabledebug"><a name="ENABLE_DEBUG_MODE"></a>EnableDebug</h2>

<ul>
<li>packet identifier: <code>ENABLE_DEBUG_MODE</code> : 11</li>
<li>data length:</li>
</ul>

<h2 id="anameset_clue_countasetcluecount"><a name="SET_CLUE_COUNT"></a>SetClueCount</h2>

<ul>
<li>packet identifier: <code>SET_CLUE_COUNT</code> : 240</li>
<li>data length: 1</li>
</ul>

<h3 id="setcluecountencoding">SetClueCount encoding</h3>

<table>
<caption id="encodingforpacketsetcluecount">Encoding for packet SetClueCount</caption>
<colgroup>
<col/>
<col/>
<col style="text-align:center;"/>
<col style="text-align:center;"/>
<col/>
</colgroup>

<thead>
<tr>
	<th>Bytes</th>
	<th>Name</th>
	<th style="text-align:center;"><a href="#Enc">Enc</a></th>
	<th style="text-align:center;">Repeat</th>
	<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td>0</td>
	<td>1)clueCount</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
</tbody>
</table>

<h2 id="anamevalidate_cluesavalidateclues"><a name="VALIDATE_CLUES"></a>ValidateClues</h2>

<ul>
<li>packet identifier: <code>VALIDATE_CLUES</code> : 242</li>
<li>data length:</li>
</ul>

<h2 id="anamevalidate_cluesainvalidateclues"><a name="VALIDATE_CLUES"></a>InvalidateClues</h2>

<ul>
<li>packet identifier: <code>VALIDATE_CLUES</code> : 242</li>
<li>data length:</li>
</ul>

<h2 id="anamesystem_infoaboxinfo"><a name="SYSTEM_INFO"></a>BoxInfo</h2>

<ul>
<li>packet identifier: <code>SYSTEM_INFO</code> : 160</li>
<li>data length: 9</li>
</ul>

<h3 id="boxinfoencoding">BoxInfo encoding</h3>

<table>
<caption id="encodingforpacketboxinfo">Encoding for packet BoxInfo</caption>
<colgroup>
<col/>
<col/>
<col style="text-align:center;"/>
<col style="text-align:center;"/>
<col/>
</colgroup>

<thead>
<tr>
	<th>Bytes</th>
	<th>Name</th>
	<th style="text-align:center;"><a href="#Enc">Enc</a></th>
	<th style="text-align:center;">Repeat</th>
	<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td>0&#8230;8</td>
	<td colspan="2">1)info</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>0&#8230;1</td>
	<td>1.1)serialNumber</td>
	<td style="text-align:center;">U16</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>2</td>
	<td>1.2)versionMajor</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>3</td>
	<td>1.3)versionMinor</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>4</td>
	<td>1.4)pcbRevision</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>5</td>
	<td colspan="2">1.5)status</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>5:7</td>
	<td>1.5.1)locked</td>
	<td style="text-align:center;">B1</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>6</td>
	<td>1.6)charge</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>7</td>
	<td>1.7)currentClue</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>8</td>
	<td>1.8)totalClues</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
</tbody>
</table>

<h2 id="anamesystem_infoarequestboxinfo"><a name="SYSTEM_INFO"></a>RequestBoxInfo</h2>

<ul>
<li>packet identifier: <code>SYSTEM_INFO</code> : 160</li>
<li>data length:</li>
</ul>

<h2 id="anameclue_infoaclueinfo"><a name="CLUE_INFO"></a>ClueInfo</h2>

<ul>
<li>packet identifier: <code>CLUE_INFO</code> : 176</li>
<li>data length: 21</li>
</ul>

<h3 id="clueinfoencoding">ClueInfo encoding</h3>

<table>
<caption id="encodingforpacketclueinfo">Encoding for packet ClueInfo</caption>
<colgroup>
<col/>
<col/>
<col style="text-align:center;"/>
<col style="text-align:center;"/>
<col/>
</colgroup>

<thead>
<tr>
	<th>Bytes</th>
	<th>Name</th>
	<th style="text-align:center;"><a href="#Enc">Enc</a></th>
	<th style="text-align:center;">Repeat</th>
	<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td>0</td>
	<td>1)clueNumber</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>1&#8230;20</td>
	<td colspan="2">2)clueInfo</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>1&#8230;8</td>
	<td>2.1)lat</td>
	<td style="text-align:center;">F64</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>9&#8230;16</td>
	<td>2.2)lng</td>
	<td style="text-align:center;">F64</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>17&#8230;18</td>
	<td>2.3)threshold</td>
	<td style="text-align:center;">U16</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>19</td>
	<td>2.4)<a href="#ClueTypes">type</a></td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>20</td>
	<td colspan="2">2.5)options</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>20:7</td>
	<td>2.5.1)centerText</td>
	<td style="text-align:center;">B1</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
</tbody>
</table>

<h2 id="anameclue_infoarequestclueinfo"><a name="CLUE_INFO"></a>RequestClueInfo</h2>

<ul>
<li>packet identifier: <code>CLUE_INFO</code> : 176</li>
<li>data length: 1</li>
</ul>

<h3 id="requestclueinfoencoding">RequestClueInfo encoding</h3>

<table>
<caption id="encodingforpacketrequestclueinfo">Encoding for packet RequestClueInfo</caption>
<colgroup>
<col/>
<col/>
<col style="text-align:center;"/>
<col style="text-align:center;"/>
<col/>
</colgroup>

<thead>
<tr>
	<th>Bytes</th>
	<th>Name</th>
	<th style="text-align:center;"><a href="#Enc">Enc</a></th>
	<th style="text-align:center;">Repeat</th>
	<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td>0</td>
	<td>1)clueNumber</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
</tbody>
</table>

<h2 id="anameclue_lineaclueline"><a name="CLUE_LINE"></a>ClueLine</h2>

<ul>
<li>packet identifier: <code>CLUE_LINE</code> : 192</li>
<li>minimum data length: 3</li>
<li>maximum data length: 42</li>
</ul>

<h3 id="cluelineencoding">ClueLine encoding</h3>

<table>
<caption id="encodingforpacketclueline">Encoding for packet ClueLine</caption>
<colgroup>
<col/>
<col/>
<col style="text-align:center;"/>
<col style="text-align:center;"/>
<col/>
</colgroup>

<thead>
<tr>
	<th>Bytes</th>
	<th>Name</th>
	<th style="text-align:center;"><a href="#Enc">Enc</a></th>
	<th style="text-align:center;">Repeat</th>
	<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td>0</td>
	<td>1)clueNumber</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>1</td>
	<td>2)lineNumber</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>2&#8230;41</td>
	<td>3)lineText</td>
	<td style="text-align:center;" colspan="2">Zero-terminated string up to 40 bytes</td>
	<td></td>
</tr>
</tbody>
</table>

<h2 id="anameclue_linearequestclueline"><a name="CLUE_LINE"></a>RequestClueLine</h2>

<ul>
<li>packet identifier: <code>CLUE_LINE</code> : 192</li>
<li>data length: 2</li>
</ul>

<h3 id="requestcluelineencoding">RequestClueLine encoding</h3>

<table>
<caption id="encodingforpacketrequestclueline">Encoding for packet RequestClueLine</caption>
<colgroup>
<col/>
<col/>
<col style="text-align:center;"/>
<col style="text-align:center;"/>
<col/>
</colgroup>

<thead>
<tr>
	<th>Bytes</th>
	<th>Name</th>
	<th style="text-align:center;"><a href="#Enc">Enc</a></th>
	<th style="text-align:center;">Repeat</th>
	<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
	<td>0</td>
	<td>1)clueNumber</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
<tr>
	<td>1</td>
	<td>2)lineNumber</td>
	<td style="text-align:center;">U8</td>
	<td style="text-align:center;">1</td>
	<td></td>
</tr>
</tbody>
</table>

</body>
</html>
